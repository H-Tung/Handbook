# 5.4. Xorg 配置  
  
## 5.4.1. 快速启动  
  
Xorg支持大多数常见的显卡、键盘和指向性设备。  
  
> **Tip**  
> 显卡、显示器和输入设备是自动检测的，不需要任何手动配置。除非自动配置失败，否则不要创建**xorg.conf**或运行`-configure`步骤。  
>   
  
> 1. 如果之前在这台电脑上使用过 Xorg ，请移动或删除任何现有的配置文件。  
>   
>         # mv /etc/X11/xorg.conf ~/xorg.conf.etc  
>         # mv /usr/local/etc/X11/xorg.conf ~/xorg.conf.localetc  
>   
> 2. 将运行Xorg的用户添加到`video`组或`wheel`组，以便在可用时启用3D加速。将用户`jru`添加到任何一个可用的组中。  
>   
>         # pw groupmod video -m jru || pw groupmod wheel -m jru  
>   
> 3. `TWM`窗口管理器默认包含在其中。它在 Xorg 启动时被启动。  
>   
>         % startx  
>   
> 4. 在某些旧版本的 FreeBSD 上，系统控制台必须设置为 [vt(4)](https://www.freebsd.org/cgi/man.cgi?query=vt&sektion=4&format=html) 才能正常切换到文本控制台。参见[内核模式设置(KMS)](https://docs.freebsd.org/en/books/handbook/x11/#x-config-kms)。  
>   
  
## 5.4.2. 显卡加速的用户组  
  
需要访问 **/dev/dri** ，以允许在视频卡上进行3D加速。通常最简单的做法是将运行X的用户加入`video`组或`wheel`组。这里， [pw(8)](https://www.freebsd.org/cgi/man.cgi?query=pw&sektion=8&format=html) 被用来将用户`slurms`加入`video`组，如果没有`video`组，则加入`wheel`组。  
  
    # pw groupmod video -m slurms || pw groupmod wheel -m slurms  
  
## 5.4.3. 内核模式设置(KMS)  
  
当计算机从显示控制台切换到X的更高屏幕分辨率时，必须设置视频输出模式。最近版本的Xorg使用内核内的一个系统来更有效地进行这些模式的改变。旧版本的FreeBSD使用 [sc(4)](https://www.freebsd.org/cgi/man.cgi?query=sc&sektion=4&format=html) ，它不知道KMS系统的存在。最终的结果是，在关闭X之后，系统控制台是空白的，尽管它仍然在工作。较新的 [vt(4)](https://www.freebsd.org/cgi/man.cgi?query=vt&sektion=4&format=html) 控制台避免了这个问题。
  
  在 **/boot/loader.conf** 中加入这一行以启用 [vt(4)](https://www.freebsd.org/cgi/man.cgi?query=vt&sektion=4&format=html) 。  

    kern.vty=vt  
  
## 5.4.4. 配置文件  
  
手动配置通常是不必要的。除非自动配置不起作用，否则请不要手动创建配置文件。  
  
### 5.4.4.1. 目录  
  
Xorg 在几个目录中寻找配置文件。 **/usr/local/etc/X11/** 是 FreeBSD 上推荐的存放这些文件的目录。使用这个目录有助于将应用程序文件与操作系统文件分开。  
  
将配置文件存储在传统的 **/etc/X11/** 中仍然有效。然而， 这将应用文件与 FreeBSD 的基本文件混在一起， 因此不推荐使用。  
  
### 5.4.4.2. 单个或多个文件  
  
与传统的单个 **xorg.conf** 相比， 使用多个文件来配置一个特定的设置会更容易。这些文件存储在主配置文件目录的 **xorg.conf.d/** 子目录中。完整路径通常是 **/usr/local/etc/X11/xorg.conf.d/** 。  
  
这些文件的例子将在本节后面显示。  
  
传统的单一 **xorg.conf** 仍然有效，但既不像 **xorg.conf.d/** 子目录中的多个文件那样清晰，也不像那样灵活。  
  


