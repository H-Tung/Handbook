# 31.1. 概述

防火墙可以过滤流经系统的传入和传出流量。防火墙可以使用一组或多组“规则”来检查网络数据包，当它们进入或退出网络连接时，并允许流量通过或阻止它。防火墙的规则可以检查数据包的一个或多个特征，例如协议类型、源或目标主机地址以及源或目标端口。

防火墙可以增强主机或网络的安全性。它们可用于执行下列一项或多项操作：

- 保护内部网络的应用程序、服务和计算机，并将其与来自公共 Internet 的不需要的流量隔离开来。
- 限制或禁用从内部网络主机到公共 Internet 服务的访问。
- 支持网络地址转换 （NAT），它允许内部网络使用专用 IP 地址，并使用单个 IP 地址或自动分配的公用地址的共享池共享与公用 Internet 的单个连接。

FreeBSD 在基本系统中内置了三个防火墙：PF、IPFW 和 IPFILTER，也称为 IPF。FreeBSD 还提供了两个流量整形器来控制带宽的使用： [altq（4）](https://www.freebsd.org/cgi/man.cgi?query=altq&sektion=4&format=html) 和 [dummynet（4）](https://www.freebsd.org/cgi/man.cgi?query=dummynet&sektion=4&format=html)。ALTQ传统上与PF紧密相连，与IPFW有dummynet紧密联系。每个防火墙都使用规则来控制进出 FreeBSD 系统的数据包的访问，尽管它们以不同的方式进行，并且每个都有不同的规则语法。

FreeBSD 提供了多个防火墙，以满足各种用户的不同需求和偏好。每个用户都应评估哪种防火墙最能满足他们的需求。

读完本章，你就会知道：

- 如何定义数据包过滤规则。
- 内置于 FreeBSD 中的防火墙之间的差异。
- 如何使用和配置 PF 防火墙。
- 如何使用和配置 IPFW 防火墙。
- 如何使用和配置 IPFILTER 防火墙。

在阅读本章之前，你应该：

- 了解基本的 FreeBSD 和 Internet 概念。

| 注意                                                         |
| ------------------------------------------------------------ |
| 由于所有防火墙都基于检查所选数据包控制字段的值，因此防火墙规则集的创建者必须了解 TCP/IP 的工作原理、数据包控制字段中的不同值是什么，以及如何在正常会话会话中使用这些值。有关良好的介绍，请参阅[Daryl的TCP / IP入门](http://www.ipprimer.com/)。|
